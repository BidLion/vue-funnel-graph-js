var VueFunnelGraph=function(e,t,n,a,i,s){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a;var r={name:"VueFunnelGraph",props:{animated:{type:Boolean,default:!1},width:[String,Number],height:[String,Number],values:Array,labels:Array,colors:{type:Array,default:function(){return[]}},subLabels:Array,direction:{type:String,default:"horizontal"},gradientDirection:{type:String,default:"horizontal"},displayPercentage:{type:Boolean,default:!0}},data:function(){return{paths:[],prevPaths:[],graph:null,animationRunning:!1,defaultColors:s.getDefaultColors(10)}},computed:{valuesFormatted:function(){return this.graph.is2d()?this.graph.getValues2d().map(function(e){return i.formatNumber(e)}):this.values.map(function(e){return i.formatNumber(e)})},colorSet:function(){for(var e=[],t=0,n=0;n<this.paths.length;n++){var a=this.graph.is2d()?this.getColors[n]:this.getColors,i="string"==typeof a||1===a.length?"solid":"gradient";"gradient"===i&&(t+=1),e.push({values:a,fillMode:i,fill:"solid"===i?a:"url('#funnelGradient-"+t+"')"})}return e},gradientSet:function(){var e=[];return this.colorSet.forEach(function(t){"gradient"===t.fillMode&&e.push(t)}),e},getColors:function(){return this.colors instanceof Array&&0===this.colors.length?s.getDefaultColors(this.is2d()?this.values[0].length:2):this.colors.length<this.paths.length?[].concat(this.colors).concat([].concat(this.defaultColors).splice(this.paths.length,this.paths.length-this.colors.length)):this.colors},gradientAngle:function(){return"rotate("+("vertical"===this.gradientDirection?90:0)+")"}},methods:{enterTransition:function(e,t){this.animated||t()},leaveTransition:function(e,t){this.animated||t()},is2d:function(){return this.graph.is2d()},percentages:function(){return this.graph.createPercentages()},twoDimPercentages:function(){return this.is2d()?this.graph.getPercentages2d():[]},offsetColor:function(e,t){return Math.round(100*e/(t-1))+"%"},makeAnimations:function(){var e=this,a=[],i=this.prevPaths.length!==this.paths.length,s={x:.5,y:.5};i&&(s={x:0,y:.5},this.graph.isVertical()&&(s={x:1,y:1}),this.graph.is2d()||(s={x:0,y:1})),this.paths.forEach(function(n,r){var o=e.prevPaths[r]||e.graph.getPathMedian(r);i&&(o=e.graph.getPathMedian(r));var l=t.interpolate([o,n],{addPoints:1,origin:s,optimize:"fill",precision:1});a.push(l)});var r={value:0},o=new n.Tween(r).to({value:1},700).easing(n.Easing.Cubic.InOut).onStart(function(){e.animationRunning=!0}).onUpdate(function(){for(var t=0;t<e.paths.length;t++)e.paths[t]=a[t](r.value),e.paths.__ob__.dep.notify()}).onComplete(function(){e.animationRunning=!1});!1===this.animationRunning&&o.start(),function e(){n.update()&&requestAnimationFrame(e)}()},drawPaths:function(){var e=this;this.prevPaths=this.paths,this.paths=[],this.graph.getPathDefinitions().forEach(function(t){e.paths.push(t)})}},beforeMount:function(){this.graph=new a({height:this.height,width:this.width,data:{labels:this.labels,values:this.values}}),this.drawPaths(),this.animated&&this.makeAnimations()},watch:{values:function(){this.graph.setValues(this.values),this.drawPaths(),this.animated&&this.makeAnimations()},direction:function(){this.graph.setDirection(this.direction).setWidth(this.width).setHeight(this.height),this.drawPaths()}}};var o=function(e,t,n,a,i,s,r,o,l,h){"boolean"!=typeof r&&(l=o,o=r,r=!1);var u,d="function"==typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),a&&(d._scopeId=a),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=u):t&&(u=r?function(){t.call(this,h(this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),u)if(d.functional){var c=d.render;d.render=function(e,t){return u.call(t),c(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return n},l="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var h=document.head||document.getElementsByTagName("head")[0],u={};var d=o({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"funnel svg-funnel-js",class:{"svg-funnel-js--vertical":"vertical"===e.direction}},[n("div",{staticClass:"svg-funnel-js__container"},[n("svg",{attrs:{width:e.width,height:e.height}},[n("defs",e._l(e.gradientSet,function(t,a){return n("linearGradient",{key:a,attrs:{id:"funnelGradient-"+(a+1),gradientTransform:e.gradientAngle}},e._l(t.values,function(a,i){return n("stop",{key:i,attrs:{"stop-color":a,offset:e.offsetColor(i,t.values.length)}})}),1)}),1),e._v(" "),e._l(e.paths,function(t,a){return n("path",{key:a,attrs:{fill:e.colorSet[a].fill,stroke:e.colorSet[a].fill,d:t}})})],2)]),e._v(" "),n("transition-group",{staticClass:"svg-funnel-js__labels",attrs:{name:"appear",tag:"div"},on:{enter:e.enterTransition,leave:e.leaveTransition}},e._l(e.valuesFormatted,function(t,a){return n("div",{key:e.labels[a].toLowerCase().replace(" ","-"),staticClass:"svg-funnel-js__label",class:"label-"+(a+1)},[n("div",{staticClass:"label__value"},[e._v(e._s(t))]),e._v(" "),e.labels?n("div",{staticClass:"label__title"},[e._v(e._s(e.labels[a]))]):e._e(),e._v(" "),e.displayPercentage&&100!==e.percentages()[a]?n("div",{staticClass:"label__percentage"},[e._v("\n                "+e._s(e.percentages()[a])+"%\n            ")]):e._e(),e._v(" "),e.is2d()?n("div",{staticClass:"label__segment-percentages"},[n("ul",{staticClass:"segment-percentage__list"},e._l(e.subLabels,function(t,i){return n("li",{key:i},[e._v("\n                        "+e._s(t)+":\n                        "),n("span",{staticClass:"percentage__list-label"},[e._v(e._s(e.twoDimPercentages()[a][i])+"%")])])}),0)]):e._e()])}),0)],1)},staticRenderFns:[]},function(e){e&&e("data-v-629a3016_0",{source:".appear-enter-active[data-v-629a3016],.appear-leave-active[data-v-629a3016]{transition:all .7s ease-in-out}.appear-enter-to[data-v-629a3016],.appear-leave[data-v-629a3016]{max-width:100%;max-height:100%;opacity:1}.appear-enter[data-v-629a3016],.appear-leave-to[data-v-629a3016]{max-width:0;max-height:0;opacity:0}",map:void 0,media:void 0})},r,"data-v-629a3016",!1,void 0,function(e){return function(e,t){return function(e,t){var n=l?t.media||"default":e,a=u[n]||(u[n]={ids:new Set,styles:[]});if(!a.ids.has(e)){a.ids.add(e);var i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),a.element||(a.element=document.createElement("style"),a.element.type="text/css",t.media&&a.element.setAttribute("media",t.media),h.appendChild(a.element)),"styleSheet"in a.element)a.styles.push(i),a.element.styleSheet.cssText=a.styles.filter(Boolean).join("\n");else{var s=a.ids.size-1,r=document.createTextNode(i),o=a.element.childNodes;o[s]&&a.element.removeChild(o[s]),o.length?a.element.insertBefore(r,o[s]):a.element.appendChild(r)}}}(e,t)}},void 0),c=Object.freeze({VueFunnelGraph:d});var p={install:function e(t){e.installed||(e.installed=!0,Object.keys(c).forEach(function(e){t.component(e,c[e])}))}},f=null;return"undefined"!=typeof window?f=window.Vue:"undefined"!=typeof global&&(f=global.Vue),f&&f.use(p),e.default=p,e.VueFunnelGraph=d,e}({},interpolate,TWEEN,FunnelGraph,formatNumber,getDefaultColors);
